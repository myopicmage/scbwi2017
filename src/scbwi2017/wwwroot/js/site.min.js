function AppController(menu,$scope){var self=this;self.step=menu.getStep();self.isMember=menu.getMember();self.allowSunday=menu.getSunday();menu.subscribe($scope,function(){self.step=menu.getStep()});menu.subscribeMember($scope,function(){self.isMember=menu.getMember()});menu.subscribeSunday($scope,function(){self.allowSunday=menu.getSunday()})}function RegController(menu,info){var self=this;self.regTypes=[];self.reg={};self.reg.user={};self.selectedReg={};self.regType={};self.reg.manuscripts=0;self.reg.portfolios=0;self.reg.satdinner=0;self.prices={};self.member=function(isMember){menu.setMember(isMember);info.getRegTypes(isMember,function(data){self.regTypes=data});menu.setStep(1)};self.userInfo=function(){menu.getMember()&&(info.getComprehensives(function(data){self.comprehensives=data}),info.getWorkshops(function(data){self.earlyworkshops=data.early;self.lateworkshops=data.late}));info.getPrices(function(data){self.prices=data});menu.setStep(2)};self.typeSelect=function(){self.regType=self.regTypes.single(function(item){return item.id===self.reg.type});menu.setSunday(self.regType.sunday);info.getMeals(function(data){self.meals=data});var next=3;menu.getMember()||regType.sunday!==!0||(next=4);menu.getMember()||regType.sunday!==!1||(next=5);menu.setStep(next)};self.comprehensive=function(){var next=4;menu.getSunday()||(next=5);menu.setStep(next)};self.workshops=function(){menu.setStep(5)}}function MenuService($rootScope){var menuService={};return menuService.step=0,menuService.isMember=!0,menuService.allowSunday=!0,menuService.getStep=function(){return menuService.step},menuService.getMember=function(){return menuService.isMember},menuService.getSunday=function(){return menuService.allowSunday},menuService.setStep=function(newstep){menuService.step=newstep;$rootScope.$emit("menu-event")},menuService.setMember=function(isMember){menuService.isMember=isMember;$rootScope.$emit("member-event")},menuService.setSunday=function(sunday){menuService.allowSunday=sunday;$rootScope.$emit("sunday-event")},menuService.subscribe=function(scope,callback){var handler=$rootScope.$on("menu-event",callback);scope.$on("$destroy",handler)},menuService.subscribeMember=function(scope,callback){var handler=$rootScope.$on("member-event",callback);scope.$on("$destroy",handler)},menuService.subscribeSunday=function(scope,callback){var handler=$rootScope.$on("sunday-event",callback);scope.$on("$destroy",handler)},menuService}function InfoService($http){var infoService={};return infoService.regTypes=[],infoService.comprehensives=[],infoService.meals=[],infoService.workshops=[],infoService.manuscripts=-1,infoService.portfolios=-1,infoService.satdinner=-1,infoService.getRegTypes=function(isMember,callback,errorcallback){if(infoService.regTypes.length===0){function success(data){infoService.regTypes=data.data;callback(infoService.regTypes)}function error(data,status){errorcallback(data,status)}$http.post("/register/regtypes",isMember).then(success,error)}else callback(infoService.regTypes)},infoService.getComprehensives=function(callback,errorcallback){if(infoService.comprehensives.length===0){function success(data){infoService.comprehensives=data.data;callback(infoService.comprehensives)}function error(data,status){errorcallback(data,status)}$http.post("/register/comprehensives").then(success,error)}else callback(infoService.comprehensives)},infoService.getMeals=function(callback,errorcallback){if(infoService.meals.length===0){function success(data){infoService.meals=data.data;callback(infoService.meals)}function error(data,status){errorcallback(data,status)}$http.get("/register/meals").then(success,error)}else callback(infoService.meals)},infoService.getWorkshops=function(callback,errorcallback){if(infoService.workshops.length===0){function success(data){infoService.workshops=data.data;callback(infoService.workshops)}function error(data,status){errorcallback(data,status)}$http.get("/register/workshops").then(success,error)}else callback(infoService.workshops)},infoService.getPrices=function(){if(infoService.manuscripts===-1||infoService.portfolios===-1||infoService.satdinner===-1){function success(data){for(var i in data.data)console.log("i",i),infoService[i.type]=i.value;console.log("infoService",infoService)}function error(){}$http.get("/register/price?type=satdinner,portfolio,manuscript").then(success,error)}},infoService}var app=angular.module("scbwi",["ngMaterial"]);app.config(function($mdThemingProvider){$mdThemingProvider.definePalette("amazingPaletteName",{"50":"ffebee","100":"ffcdd2","200":"ef9a9a","300":"e57373","400":"ef5350","500":"f69331","600":"e53935","700":"d32f2f","800":"ffcb98","900":"b71c1c",A100:"EF5B34",A200:"ff5252",A400:"ff1744",A700:"d50000",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","400","A100"],contrastLightColors:undefined});$mdThemingProvider.theme("default").primaryPalette("amazingPaletteName",{"default":"500","hue-2":"800","hue-3":"A100"})});app.factory("menu",MenuService);app.factory("info",InfoService);app.controller("AppCtrl",AppController);app.controller("RegCtrl",RegController);Array.prototype.single=function(func){var temp=this.filter(func);return temp.length===1?temp[0]:null};
//# sourceMappingURL=site.min.js.map